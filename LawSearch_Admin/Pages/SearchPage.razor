@page "/"
@using LawSearch_Admin.ViewModels
@inject ISearchAdminService searchAdminService;
@inject IArticalAdminService articalAdminService;

<div class="ss">
    <div class="search-container">
        <div class="search-input">
            <input class="input" type="text" placeholder="Bạn cần tìm kiếm gì?" spellcheck="false" @bind-value="@input" />
        </div>
        <div class="search-button" @onclick="SearchAction">
            <img class="search-icon" src="assests/icon/search_icon.png" />
        </div>
    </div>

    @if (lstResult != null)
    {
        <div class="result-container">
            <div class="result-total">
                Khoảng 18 kết quả
            </div>
                @for (int i = 0; i < 18; i++)
                {
                <SearchResultItem Rank="@rank" Info="@title" />
                }
        </div>
    }
</div>

@code{
    public string rank = "Rank #1";
    public string title = "Điều 83 | Chương 6 | Luật đất đai 2013";

    public string input ;
    public SearchArticalResult lstResult = null;
    public List<Artical> lstArtical;

    protected override async Task OnInitializedAsync()
    {
        var data = await articalAdminService.GetListArtical();
        lstArtical = data;
    }

    private async void SearchAction(){
        if(input.Length >= 12)
        {
            var rs = await searchAdminService.GetResultSearchLaw(input);
            lstResult = rs;
        }
    }
}